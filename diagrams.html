<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QnA Model Deployment Flow Diagrams</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }
        
        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 40px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .diagram-section {
            margin-bottom: 50px;
            padding: 30px;
            background: linear-gradient(145deg, #f8f9fa, #e9ecef);
            border-radius: 15px;
            box-shadow: inset 5px 5px 10px #d1d9e6, inset -5px -5px 10px #ffffff;
        }
        
        .diagram-title {
            font-size: 1.8em;
            color: #34495e;
            margin-bottom: 25px;
            text-align: center;
            padding-bottom: 15px;
            border-bottom: 3px solid #3498db;
        }
        
        .flow-diagram {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }
        
        .flow-row {
            display: flex;
            align-items: center;
            gap: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .flow-box {
            background: linear-gradient(145deg, #ffffff, #f0f0f0);
            border: 2px solid #3498db;
            border-radius: 15px;
            padding: 15px 20px;
            text-align: center;
            min-width: 150px;
            box-shadow: 5px 5px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            position: relative;
        }
        
        .flow-box:hover {
            transform: translateY(-5px);
            box-shadow: 5px 15px 25px rgba(0, 0, 0, 0.2);
            border-color: #2980b9;
        }
        
        .flow-box.github {
            background: linear-gradient(145deg, #24292e, #1a1d21);
            color: white;
            border-color: #24292e;
        }
        
        .flow-box.jenkins {
            background: linear-gradient(145deg, #d33833, #b71c1c);
            color: white;
            border-color: #d33833;
        }
        
        .flow-box.docker {
            background: linear-gradient(145deg, #2496ed, #1976d2);
            color: white;
            border-color: #2496ed;
        }
        
        .flow-box.k8s {
            background: linear-gradient(145deg, #326ce5, #1e88e5);
            color: white;
            border-color: #326ce5;
        }
        
        .flow-box.model {
            background: linear-gradient(145deg, #ff9800, #f57c00);
            color: white;
            border-color: #ff9800;
        }
        
        .flow-box.service {
            background: linear-gradient(145deg, #4caf50, #388e3c);
            color: white;
            border-color: #4caf50;
        }
        
        .arrow {
            font-size: 24px;
            color: #3498db;
            font-weight: bold;
        }
        
        .arrow-down {
            transform: rotate(90deg);
        }
        
        .stage-number {
            position: absolute;
            top: -10px;
            left: -10px;
            background: #e74c3c;
            color: white;
            border-radius: 50%;
            width: 25px;
            height: 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
        }
        
        .architecture-diagram {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .arch-component {
            background: linear-gradient(145deg, #ffffff, #f8f9fa);
            border: 2px solid #6c757d;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }
        
        .arch-component:hover {
            transform: scale(1.05);
            border-color: #495057;
        }
        
        .component-title {
            font-size: 1.2em;
            font-weight: bold;
            color: #495057;
            margin-bottom: 10px;
        }
        
        .component-details {
            font-size: 0.9em;
            color: #6c757d;
        }
        
        .namespace-section {
            background: linear-gradient(145deg, #e3f2fd, #bbdefb);
            border: 2px dashed #2196f3;
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
        }
        
        .namespace-title {
            font-weight: bold;
            color: #1976d2;
            text-align: center;
            margin-bottom: 10px;
        }
        
        @media (max-width: 768px) {
            .flow-row {
                flex-direction: column;
            }
            
            .arrow {
                transform: rotate(90deg);
            }
            
            .container {
                padding: 15px;
            }
            
            h1 {
                font-size: 2em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ü§ñ Extractive QnA Model - MLOps Pipeline</h1>
        
        <!-- Overall CI/CD Pipeline Flow -->
        <div class="diagram-section">
            <div class="diagram-title">üîÑ Complete CI/CD Pipeline Flow</div>
            <div class="flow-diagram">
                <div class="flow-row">
                    <div class="flow-box github">
                        <div class="stage-number">1</div>
                        <strong>GitHub Push</strong><br>
                        <small>Code push to v2 branch triggers pipeline</small>
                    </div>
                    <div class="arrow">‚Üí</div>
                    <div class="flow-box jenkins">
                        <div class="stage-number">2</div>
                        <strong>Jenkins Trigger</strong><br>
                        <small>Webhook triggers build</small>
                    </div>
                </div>
                
                <div class="arrow arrow-down">‚Üí</div>
                
                <div class="flow-row">
                    <div class="flow-box jenkins">
                        <div class="stage-number">3</div>
                        <strong>Code Checkout</strong><br>
                        <small>Pull latest code from v2 branch</small>
                    </div>
                    <div class="arrow">‚Üí</div>
                    <div class="flow-box jenkins">
                        <div class="stage-number">4</div>
                        <strong>Run Tests</strong><br>
                        <small>Execute pytest on QnA service</small>
                    </div>
                </div>
                
                <div class="arrow arrow-down">‚Üí</div>
                
                <div class="flow-row">
                    <div class="flow-box k8s model">
                        <div class="stage-number">5</div>
                        <strong>Model Training</strong><br>
                        <small>K8s Job in training-model-env namespace</small>
                    </div>
                    <div class="arrow">‚Üí</div>
                    <div class="flow-box docker">
                        <div class="stage-number">6</div>
                        <strong>Build QnA Service</strong><br>
                        <small>Docker build ashutoshj/qna_service</small>
                    </div>
                </div>
                
                <div class="arrow arrow-down">‚Üí</div>
                
                <div class="flow-row">
                    <div class="flow-box docker">
                        <div class="stage-number">7</div>
                        <strong>Push Service Image</strong><br>
                        <small>Push to Docker Hub</small>
                    </div>
                    <div class="arrow">‚Üí</div>
                    <div class="flow-box k8s">
                        <div class="stage-number">8</div>
                        <strong>Kaniko Build</strong><br>
                        <small>Build model image with trained weights</small>
                    </div>
                </div>
                
                <div class="arrow arrow-down">‚Üí</div>
                
                <div class="flow-row">
                    <div class="flow-box k8s">
                        <div class="stage-number">9</div>
                        <strong>Load Model</strong><br>
                        <small>Extract model to PV in training-env</small>
                    </div>
                    <div class="arrow">‚Üí</div>
                    <div class="flow-box service">
                        <div class="stage-number">10</div>
                        <strong>Deploy Service</strong><br>
                        <small>Deploy QnA service with new model</small>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Model Training & Serving Architecture -->
        <div class="diagram-section">
            <div class="diagram-title">üèóÔ∏è Model Training & Serving Architecture</div>
            
            <div class="namespace-section">
                <div class="namespace-title">training-model-env Namespace</div>
                <div class="architecture-diagram">
                    <div class="arch-component model">
                        <div class="component-title">Training Job</div>
                        <div class="component-details">
                            ‚Ä¢ Image: ashutoshj/training_image2<br>
                            ‚Ä¢ Trains extractive QnA model<br>
                            ‚Ä¢ Saves to PV: train-model-pv
                        </div>
                    </div>
                    <div class="arch-component docker">
                        <div class="component-title">Kaniko Builder</div>
                        <div class="component-details">
                            ‚Ä¢ Builds model image<br>
                            ‚Ä¢ Includes trained weights<br>
                            ‚Ä¢ Pushes to Docker Hub
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="namespace-section">
                <div class="namespace-title">training-env Namespace</div>
                <div class="architecture-diagram">
                    <div class="arch-component k8s">
                        <div class="component-title">Model Loader Job</div>
                        <div class="component-details">
                            ‚Ä¢ Extracts model from image<br>
                            ‚Ä¢ Copies to serving PV<br>
                            ‚Ä¢ Makes model available
                        </div>
                    </div>
                    <div class="arch-component service">
                        <div class="component-title">QnA Service</div>
                        <div class="component-details">
                            ‚Ä¢ FastAPI application<br>
                            ‚Ä¢ /answer endpoint<br>
                            ‚Ä¢ Loads model from PV
                        </div>
                    </div>
                    <div class="arch-component k8s">
                        <div class="component-title">HPA & Ingress</div>
                        <div class="component-details">
                            ‚Ä¢ Auto-scaling: 2-10 replicas<br>
                            ‚Ä¢ CPU threshold: 5%<br>
                            ‚Ä¢ Host: qna-model.local
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Data Flow Diagram -->
        <div class="diagram-section">
            <div class="diagram-title">üìä Data & Model Flow</div>
            <div class="flow-diagram">
                <div class="flow-row">
                    <div class="flow-box github">
                        <strong>Source Code</strong><br>
                        <small>Training scripts, service code</small>
                    </div>
                    <div class="arrow">‚Üí</div>
                    <div class="flow-box model">
                        <strong>Model Training</strong><br>
                        <small>Process training data</small>
                    </div>
                    <div class="arrow">‚Üí</div>
                    <div class="flow-box k8s">
                        <strong>Trained Model</strong><br>
                        <small>Weights saved to PV</small>
                    </div>
                </div>
                
                <div class="arrow arrow-down">‚Üí</div>
                
                <div class="flow-row">
                    <div class="flow-box docker">
                        <strong>Model Image</strong><br>
                        <small>Docker image with weights</small>
                    </div>
                    <div class="arrow">‚Üí</div>
                    <div class="flow-box k8s">
                        <strong>Model Extraction</strong><br>
                        <small>Copy to serving PV</small>
                    </div>
                    <div class="arrow">‚Üí</div>
                    <div class="flow-box service">
                        <strong>Live Service</strong><br>
                        <small>/answer API endpoint</small>
                    </div>
                </div>
                
                <div class="arrow arrow-down">‚Üí</div>
                
                <div class="flow-row">
                    <div class="flow-box">
                        <strong>User Request</strong><br>
                        <small>Question + Context</small>
                    </div>
                    <div class="arrow">‚Üí</div>
                    <div class="flow-box service">
                        <strong>QnA Processing</strong><br>
                        <small>Extract answer from context</small>
                    </div>
                    <div class="arrow">‚Üí</div>
                    <div class="flow-box">
                        <strong>Response</strong><br>
                        <small>Extracted answer</small>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Infrastructure Components -->
        <div class="diagram-section">
            <div class="diagram-title">üõ†Ô∏è Infrastructure Components</div>
            <div class="architecture-diagram">
                <div class="arch-component jenkins">
                    <div class="component-title">Jenkins Pipeline</div>
                    <div class="component-details">
                        ‚Ä¢ Automated CI/CD<br>
                        ‚Ä¢ GitHub webhook trigger<br>
                        ‚Ä¢ Email notifications<br>
                        ‚Ä¢ Minikube deployment
                    </div>
                </div>
                <div class="arch-component docker">
                    <div class="component-title">Docker Registry</div>
                    <div class="component-details">
                        ‚Ä¢ ashutoshj/qna_service<br>
                        ‚Ä¢ ashutoshj/trained-model-image2<br>
                        ‚Ä¢ ashutoshj/training_image2<br>
                        ‚Ä¢ Automated builds via Kaniko
                    </div>
                </div>
                <div class="arch-component k8s">
                    <div class="component-title">Kubernetes Cluster</div>
                    <div class="component-details">
                        ‚Ä¢ Minikube local cluster<br>
                        ‚Ä¢ Multiple namespaces<br>
                        ‚Ä¢ Persistent volumes<br>
                        ‚Ä¢ Jobs & Deployments
                    </div>
                </div>
                <div class="arch-component">
                    <div class="component-title">Storage</div>
                    <div class="component-details">
                        ‚Ä¢ Persistent Volumes<br>
                        ‚Ä¢ Model weight storage<br>
                        ‚Ä¢ /mnt/model hostPath<br>
                        ‚Ä¢ ReadWriteOnce access
                    </div>
                </div>
                <div class="arch-component service">
                    <div class="component-title">Service Exposure</div>
                    <div class="component-details">
                        ‚Ä¢ NodePort: 30008<br>
                        ‚Ä¢ Ingress: qna-model.local<br>
                        ‚Ä¢ LoadBalancer ready<br>
                        ‚Ä¢ FastAPI /answer endpoint
                    </div>
                </div>
                <div class="arch-component model">
                    <div class="component-title">Auto-scaling</div>
                    <div class="component-details">
                        ‚Ä¢ HPA: 2-10 replicas<br>
                        ‚Ä¢ CPU utilization: 5%<br>
                        ‚Ä¢ Automatic pod scaling<br>
                        ‚Ä¢ Resource optimization
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Deployment Stages -->
        <div class="diagram-section">
            <div class="diagram-title">üöÄ Deployment Stages Breakdown</div>
            <div class="flow-diagram">
                <div class="flow-row">
                    <div class="flow-box jenkins">
                        <strong>Stage 1: Checkout</strong><br>
                        <small>git clone from v2 branch</small>
                    </div>
                    <div class="flow-box jenkins">
                        <strong>Stage 2: Testing</strong><br>
                        <small>pytest qna_service/qna_testing.py</small>
                    </div>
                </div>
                
                <div class="arrow arrow-down">‚Üí</div>
                
                <div class="flow-row">
                    <div class="flow-box k8s model">
                        <strong>Stage 3: Training</strong><br>
                        <small>kubectl apply training manifests<br>Wait for job completion</small>
                    </div>
                    <div class="flow-box docker">
                        <strong>Stage 4: Build Service</strong><br>
                        <small>docker.build qna_service image</small>
                    </div>
                </div>
                
                <div class="arrow arrow-down">‚Üí</div>
                
                <div class="flow-row">
                    <div class="flow-box docker">
                        <strong>Stage 5: Push Service</strong><br>
                        <small>docker push to hub</small>
                    </div>
                    <div class="flow-box k8s">
                        <strong>Stage 6: Build Model Image</strong><br>
                        <small>Kaniko job with trained weights</small>
                    </div>
                </div>
                
                <div class="arrow arrow-down">‚Üí</div>
                
                <div class="flow-row">
                    <div class="flow-box k8s">
                        <strong>Stage 7: Load Model</strong><br>
                        <small>Extract model to serving PV</small>
                    </div>
                    <div class="flow-box service">
                        <strong>Stage 8: Deploy</strong><br>
                        <small>kubectl apply inference manifests</small>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>